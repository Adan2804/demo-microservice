server {
    listen 80;
    server_name localhost;

    # Root endpoint
    location / {
        return 200 '{"service": "demo-microservice", "version": "$APP_VERSION", "status": "running"}';
        add_header Content-Type application/json;
        add_header X-App-Version $APP_VERSION;
        add_header X-Service-Name demo-microservice;
    }

    # Health endpoint
    location /health {
        return 200 '{"status": "UP", "version": "$APP_VERSION"}';
        add_header Content-Type application/json;
        add_header X-App-Version $APP_VERSION;
    }

    # API endpoint for experiments
    location /api/v1/experiment/version {
        return 200 '{"version": "$APP_VERSION", "service": "demo-microservice", "endpoint": "/api/v1/experiment/version", "timestamp": "$time_iso8601"}';
        add_header Content-Type application/json;
        add_header X-App-Version $APP_VERSION;
        add_header X-Service-Name demo-microservice;
        add_header X-Endpoint experiment-version;
    }

    # Demo monetary endpoint
    location /demo/monetary {
        return 200 '{"version": "$APP_VERSION", "service": "demo-microservice", "endpoint": "/demo/monetary", "data": {"amount": 1000, "currency": "USD"}}';
        add_header Content-Type application/json;
        add_header X-App-Version $APP_VERSION;
        add_header X-Service-Name demo-microservice;
    }
}